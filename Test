// --- MPC code ---
$.ajax({
    url: "/bin/bcuspublic/offerproductmpccodes",
    type: "GET",
    dataType: "json",
    data: {
        offerProductId: offerProdId
    }
})
.done(function (mpcCodes) {
    if (!mpcCodes || !mpcCodes.length) {
        return;
    }

    var mpcSet = new Set(mpcCodes);

    $("input[name='./sling:vanityPath']").each(function () {
        var vanity = this.value || "";
        var index = vanity.lastIndexOf("/");
        var mpcCode = (index === -1) ? vanity : vanity.substring(index + 1);

        if (mpcSet.has(mpcCode)) {
            $(this).parent().closest("coral-multifield-item").remove();
            $(this).parent().closest("li").remove(); // coral2 fallback
        }
    });
})
.fail(function (xhr, status, errorThrown) {
    console.log("MPC Servlet Error: " + errorThrown);
});
