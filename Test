@Test
public void getOfferProductIdTest_mockito() {
    ResourceResolver resolver = mock(ResourceResolver.class);
    Resource page = mock(Resource.class);
    Resource primaryNode = mock(Resource.class);
    Resource item = mock(Resource.class);

    ValueMap valueMap = mock(ValueMap.class);

    when(resolver.getResource("/content/page")).thenReturn(page);
    when(page.getChild("jcr:content/primaryOfferProductIds")).thenReturn(primaryNode);
    when(primaryNode.listChildren()).thenReturn(Collections.singletonList(item).iterator());
    when(item.getValueMap()).thenReturn(valueMap);
    when(valueMap.get("offerProductId", String.class)).thenReturn("offer-1");

    List<String> result =
            OfferProductUtil.getOfferProductIds("/content/page", resolver);

    assertEquals(1, result.size());
    assertEquals("offer-1", result.get(0));
}
