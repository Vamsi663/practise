(function(document, $) {
    var $document = $(document);

    function updateHref($link, $input) {
        if ($link && $input) {
            var inputVal = $input.val();
            if (inputVal) {
                $link.show();
                $link.attr('href', '/editor.html' + inputVal);
            } else {
                $link.hide();
            }
        }
    }

    function addTitleToCF(elem) {
        if (elem) {
            var $el = $(elem);
            var title = $el.val();
            var $elWrapper = $el.closest('.coral-Collapsible');
            if ($elWrapper && $elWrapper.length) {
                var $link = $elWrapper.find('.coral-Collapsible-header .coral-Collapsible-title');
                if ($link && $link.length) {
                    $link[0].innerText = title.length ? title : 'Edit';
                }
            }
        }
    }

    $document.on('foundation-contentloaded', function(e) {
        $('.outer-title').each(function() {
            addTitleToCF(this);
        });

        $('.inner-title').each(function() {
            addTitleToCF(this);
        });
    });

    $document.on('dialog-ready', function(e) {
        $('.outer-title').each(function() {
            addTitleToCF(this);
        });
        
        $('.inner-title').each(function() {
            addTitleToCF(this);
        });
    });

})(document, Granite.$);
